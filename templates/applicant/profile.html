{% extends 'base.html' %}
{% load static %}
{% block head %}
<head id="header_style">
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
</head>
{% endblock %}
{% block content %}
<section>
    <div class="profile_header">
        <div class="profile_logo">
            <span>지원자 프로필</span>
        </div>
        <div class="actions">
            <button id="load-profile" data-applicant-id="{{applicant.pk}}">프로필 정보 |</button>
            <button id="load-comment" data-applicant-id="{{applicant.pk}}">코멘트 작성 |</button>
            <button id="load-question" data-applicant-id="{{applicant.pk}}">개별 질문 |</button>
            <button id="load-evaluation" data-applicant-id="{{applicant.pk}}">평가표 확인 |</button>
            <div class="application_text">
                <button id="recordBtn">녹음</button>
                <audio id="audioPlayback" controls style="display: none;"></audio>
                <button id="deleteRecordingBtn" style="{% if not recording_exists %}display: none;{% endif %}">삭제</button>
            </div>
        </div>
    </div>
    <div class="profile_section">
        <div class="profile_container">
            <div class="profile_personal">
                <div class="profile_name">{{ applicant.name }}</div>
                <div class="profile_detail">
                    <div class="profile_detail1">
                        <p>학교</p>
                        <p>학과</p>
                        <p>연락처</p>
                    </div>
                    <div class="profile_detail2">
                        <p>{{ applicant.school }}</p>
                        <p>{{ applicant.major }}</p>
                        <p>{{ applicant.phone_number }}</p>
                    </div>
                </div>
            </div>
            <div class="profile_interview">
                <p><strong>면접상태:</strong> {{ applicant.get_status_display }}</p>
                <p><strong>면접일:</strong> {{ applicant.interview_date }}</p>
                <div style="display: flex; gap: 0.5rem;">
                    <strong>면접관:</strong>
                    <div>
                        {% for interviewer in applicant.interviewer.all%}
                        <span> {{ interviewer.name }}</span>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="application_container">
            <p>지원서</p>
            <div class="application_content">
                {% for answer in answers %}
                    <p class="application_question"><strong>{{ answer.question.question_text }}</strong></p>
                    <p class="application_answer">{{ answer.answer_text }}</p>
                {% endfor %}
            </div>
        </div>
    </div>
    <div id="comment_section"></div>
    <div id="question_section"></div>
    <div id="evaluation_section"></div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="{% static 'js/profile.js' %}"></script>
<script>
    // URL을 미리 템플릿에서 렌더링하여 전달
    var profileCssUrl = "{% static 'css/profile.css' %}";
    var commentsCssUrl = "{% static 'css/comments.css' %}";
    var questionsCssUrl = "{% static 'css/questions.css' %}";
    var evaluateCssUrl = "{% static 'css/evaluate.css' %}";
</script>
{% endblock %}
